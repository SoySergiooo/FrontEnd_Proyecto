<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Carrito</title>
    <link rel="stylesheet" href="../css/main.css">

    <script>

let Carrito = [
    {   idItem: 1,
        NombreItem: "Cartera A",
        PrecioUnitario: 200,
        Cantidad: 1
    },

    {   idItem: 2,
        NombreItem: "Mochila A",
        PrecioUnitario: 150,
        Cantidad: 2
    },
    {   idItem: 3,
        NombreItem: "Maleta A",
        PrecioUnitario: 220,
        Cantidad: 2 }
];

function generarTabla() {
    const tablaBody = document.getElementById('tabla-body');
    let total = 0;

    tablaBody.innerHTML = '';

    Carrito.forEach(item => {
        const subtotal = item.PrecioUnitario * item.Cantidad;
        total += subtotal; // Aqui se calcula el subtotal de cada item de la lista

        // Crear cada fila de la tabla y hace un innerHTML
        const fila = document.createElement('tr');
        fila.innerHTML = `
            <td><img src="../images/${item.NombreItem}.png" alt="${item.NombreItem}" class="imagen-producto"></td>
            <td>${item.NombreItem}</td>
            <td>
                <div class="input-cantidad">
                    <button type="button" class="btn-cantidad" onclick="actualizarCantidad(${item.idItem}, -1)">-</button>
                    <input type="text" value="${item.Cantidad}" class="cantidad-producto" readonly>
                    <button type="button" class="btn-cantidad" onclick="actualizarCantidad(${item.idItem}, 1)">+</button>
                </div>
            </td>
            <td>S/. ${item.PrecioUnitario.toFixed(2)}</td>
            <td>S/. ${subtotal.toFixed(2)}</td>
        `;
        tablaBody.appendChild(fila);
    });

    document.getElementById('total').innerHTML = `<strong>S/. ${total.toFixed(2)}</strong>`;
}

// Función para actualizar cantidad
function actualizarCantidad(idItem, cambio) {
    // Encontrar el item en el carrito
    const item = Carrito.find(producto => producto.idItem === idItem);
    if (item) {
        item.Cantidad = Math.max(1, item.Cantidad + cambio); // Evitar cantidades negativas
        generarTabla(); // Regenerar la tabla
    }
}

document.addEventListener('DOMContentLoaded', generarTabla);




    </script>





</head>
<body>
    <header>
        <div class="logo-container">
            <a href="index.html"><img src="../images/LogoMochila.png" alt="Logo" class="logo"></a>
        </div>
        <form action="" method="POST" class="search-form">
            <input type="text" name="Buscador" id="input_buscador" value="Buscar Producto">
            <button type="submit" name="boton-buscador" id="boton-buscador">
                <img src="../images/searchIcon.png" alt="Buscar" class="icon-buscar">
            </button>
        </form>
        <nav>
            <ul>
                <li class="icon" id="icono-ubicacion"><a href="#Ubicanos">
                    <img src="../images/Ubicacion.png" alt="Ubicanos" class="icono-ubicacion">
                </a></li>
                <li class="icon" id="icono-login"><a href="login.html">
                    <img src="../images/Login.png" alt="Login" class="icono-carrito-vacio">
                </a></li>
                <li class="icon" id="icono-carrito-vacio"><a href="carrito-empty.html">
                    <img src="../images/cartEmpty.png" alt="Carrito Vacio" class="icono-carrito-vacio">
                </a></li>
                <li class="icon" id="icono-carrito-lleno"><a href="carrito.html">
                    <img src="../images/cartFull.png" alt="Carrito Full" class="icono-carrito-full">
                </a></li>
            </ul>
        </nav>
    </header>


<main>
    <section>
        <h2>Mi Carrito</h2>
        <table class="tabla-carrito">
            <thead>
                <tr>
                    <th>Imagen</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody id="tabla-body">
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4"><strong>Total</strong></td>
                    <td id="total"><strong>S/. 0.00</strong></td>
                </tr>
            </tfoot>
        </table>

        <div class="botones-carrito">
            <a href="index.html" class="btn-regresar">Volver</a>
            <a class="btn-pago-able" href="Pago.html">Ir a Pagar</a>
        </div>
    </section>
</main>

    <footer class="footer">
        <div class="footer-contenedor">
            <div class="footer-info">
                <h3>Mochilonga</h3>
                <p>Mochilas, maletas y más!</p>
            </div>
            <div class="footer-links">
                <h4>Enlaces Rápidos</h4>
                <ul>
                    <li><a href="Terminos-condiciones.html">Termino y Condiciones</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="libro-reclam.html">Libro de Reclamaciones</a></li>
                    <li><a href="ayuda.html">Ayuda</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h4>Contáctanos</h4>
                <p>Email: contacto@mochilonga.com.pe</p>
                <p>Teléfono: +1 234 567 890</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Mochilonga. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>
</html>